// Generated by LiveScript 1.5.0
var load, toInt;
load = require('../modules/tasks');
toInt = require('../functions/to-int');
module.exports = function(args, options, log, path){
  var ids, tasks;
  ids = args.ids;
  tasks = load(path);
  ids.map(toInt).forEach(function(id){
    var task;
    task = tasks.find(id);
    switch (false) {
    case !!task:
      return log.info("[Error] not found task (id = " + id + ")");
    case task.status !== 'done':
      return log.info("[Error] " + task.id + ": " + task.name + " (already " + task.status + ")");
    default:
      task.update({
        status: 'done'
      });
      return log.info("[End] " + task.id + ": " + task.name);
    }
  });
  return tasks.save();
};